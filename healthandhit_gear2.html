<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>HealthAndHIT ‚Äî Shop</title>
<meta name="color-scheme" content="dark light">
<script src="https://www.paypal.com/sdk/js?client-id=sb&currency=GBP"></script>
<style>
:root {
  --bg:#191a1e; --panel:#23242b; --card:#26272f; --accent:#ff3939; --accent-2:#ff6b6b;
  --text:#ffffff; --muted:#c9c9cf; --ok:#48c774; --warn:#ffb020; --bad:#ff4d4d;
  --radius:16px; --shadow:0 8px 30px rgba(0,0,0,.35);
}
*{box-sizing:border-box;}
html,body{margin:0;background:var(--bg);color:var(--text);font-family:Poppins,system-ui,-apple-system,Segoe UI,Roboto,Arial}
a{color:inherit;}
header{position:sticky;top:0;z-index:50;background:linear-gradient(180deg,#1d1e23 0%,#1a1b20 100%);border-bottom:1px solid #2f3038}
.wrap{max-width:1160px;margin:0 auto;padding:16px}
.brand{display:flex;align-items:center;gap:12px}
.logo{width:42px;height:42px;border-radius:50%;background:radial-gradient(circle at 30% 30%,#ff6b6b,#ff3939 60%,#b70000);box-shadow:0 0 0 3px #2a2b31}
.brand h1{font-size:1.25rem;margin:0;font-weight:700;letter-spacing:.3px}
.basket-fab{
  position:fixed; right:18px; top:18px; display:flex; align-items:center; gap:10px;
  background:var(--accent); color:#fff; padding:10px 14px; border-radius:999px; box-shadow:var(--shadow);
  cursor:pointer; z-index:60; border:0; font-weight:700;
}
.basket-fab .count{background:#000; padding:2px 8px; border-radius:999px; font-size:.85rem}
.hero{padding:18px 16px 8px}
.hero .notice{background:#1f2027;border:1px solid #2c2d36;border-radius:var(--radius);padding:12px 14px;color:var(--muted)}
.grid{display:grid;grid-template-columns:repeat(1,minmax(0,1fr));gap:18px;margin:16px}
@media(min-width:640px){.grid{grid-template-columns:repeat(2,1fr)}}
@media(min-width:980px){.grid{grid-template-columns:repeat(3,1fr)}}
.card{
  background:var(--card);border-radius:var(--radius);box-shadow:var(--shadow);
  overflow:hidden;border:1px solid #2c2d36;display:flex;flex-direction:column
}
.media{
  background:#101015;display:grid;place-items:center;color:#aaa;font-size:.9rem;
  height:180px;
}
.media img{max-height:100%; max-width:100%; object-fit:contain;}
.card .body{padding:14px 14px 12px;flex:1;display:flex;flex-direction:column;justify-content:space-between}
.title{font-weight:700;margin:0 0 4px}
.price{color:#ffb923;font-weight:700}
.muted{color:var(--muted);font-size:.9rem}
.row{display:flex;gap:8px;align-items:center;flex-wrap:wrap;margin-top:10px}
select, input[type="number"], input[type="text"], input[type="email"], textarea{
  width:100%; padding:10px 12px; border-radius:10px; border:1px solid #343542; background:#1f2027; color:#fff;
}
.qty{width:110px}
.btn{display:inline-flex;align-items:center;justify-content:center;gap:8px;border:0;border-radius:12px;padding:10px 14px;font-weight:700;cursor:pointer}
.btn-accent{background:var(--accent);color:#fff}
.btn-bad{background:var(--bad);color:#fff}
.btn-block{width:100%}
.small{font-size:.92rem}

/* Drawer */
.drawer{position:fixed; inset:0; display:none; z-index:70}
.drawer.open{display:block}
.backdrop{position:absolute; inset:0; background:rgba(0,0,0,.45)}
.panel{
  position:absolute; right:0; top:0; bottom:0;
  width:min(520px,100%); background:#1b1c22;
  border-left:1px solid #2b2c33;
  display:flex; flex-direction:column;
  overflow-y:auto; -webkit-overflow-scrolling:touch;
}
.cart-items{padding:10px 16px;display:flex;flex-direction:column;gap:12px}
.cart-line{display:grid;grid-template-columns:1fr auto;gap:10px;border:1px solid #2b2c36;border-radius:12px;padding:10px;background:#20222a}
.cart-line .meta{font-size:.9rem;color:var(--muted)}
.totals{margin:10px 16px 0;border-top:1px dashed #353644;padding-top:10px;color:#ddd}
.totals .row2{display:flex;justify-content:space-between;margin:6px 0}
.totals .grand{font-size:1.15rem;font-weight:800;color:#fff}
.checkout{margin:12px 16px 18px;display:flex;flex-direction:column;gap:10px}

/* Popup */
#discountPopup {
  position: fixed; top:0; left:0; right:0; bottom:0;
  background: rgba(0,0,0,.7); display:flex; align-items:center; justify-content:center;
  z-index: 999;
}
#discountPopup .box {
  background: var(--card); padding: 20px; border-radius: var(--radius);
  max-width: 300px; text-align:center; box-shadow: var(--shadow);
}
#discountPopup button {
  margin-top: 10px; padding: 8px 14px; border: none;
  background: var(--accent); color: #fff; border-radius: 8px; cursor: pointer;
}
</style>
</head>
<body>
<header>
  <div class="wrap brand">
    <div class="logo"></div>
    <h1>HealthAndHIT ‚Äî Shop</h1>
  </div>
</header>

<button class="basket-fab" id="basketFab">üß∫ <span class="count" id="basketCount">0</span> <span id="basketTotal">¬£0.00</span></button>

<section class="hero wrap">
  <div class="notice">üî¥ <b>Now Open</b> ‚Äî Add items, then tap the basket to checkout.</div>
</section>

<section class="grid" id="productsGrid"></section>

<div class="drawer" id="drawer">
  <div class="backdrop" id="drawerBackdrop"></div>
  <div class="panel">
    <header>
      <div class="wrap" style="display:flex;justify-content:space-between;align-items:center">
        <strong>üß∫ Your Basket</strong>
        <button class="btn btn-bad small" id="closeDrawer">Close</button>
      </div>
    </header>
    <div class="cart-items" id="cartItems"></div>
    <div class="totals">
      <div class="row2"><span>Subtotal</span><strong id="subtotal">¬£0.00</strong></div>
      <div class="row2"><span>Shipping</span><span id="shipping">¬£0.00</span></div>
      <div class="row2 grand"><span>Total</span><span id="grand">¬£0.00</span></div>
    </div>
    <div class="checkout">
      <div id="paypal-button-container"></div>
      <button class="btn btn-accent btn-block" id="emailOrderBtn">Send Order by Email</button>
    </div>
  </div>
</div>

<div id="discountPopup">
  <div class="box">
    <h2>üí™ Thanks for Visiting!</h2>
    <p>Use code <b>HIT10</b> for 10% off your first order.</p>
    <p><em>‚ÄúHit your goals with HealthAndHIT‚Äù</em></p>
    <button onclick="document.getElementById('discountPopup').style.display='none'">Close</button>
  </div>
</div>

<script>
const SHIPPING_FLAT=3.99, FREE_SHIPPING_OVER=60;
const PRODUCTS=[
  {id:'tee',name:'HIT T-Shirt',price:12.00,sizes:['S','M','L','XL','2XL'],img:'https://via.placeholder.com/300x180?text=T-Shirt'},
  {id:'jumper',name:'HIT Jumper',price:24.00,sizes:['S','M','L','XL','2XL'],img:'https://via.placeholder.com/300x180?text=Jumper'},
  {id:'hoodie',name:'HIT Hoodie',price:29.00,sizes:['S','M','L','XL','2XL'],img:'https://via.placeholder.com/300x180?text=Hoodie'},
  {id:'cap',name:'HIT Cap',price:10.00,img:'https://via.placeholder.com/300x180?text=Cap'},
  {id:'beanie',name:'HIT Beanie',price:12.00,img:'https://via.placeholder.com/300x180?text=Beanie'},
  {id:'shorts',name:'HIT Shorts',price:18.00,sizes:['S','M','L','XL'],img:'https://via.placeholder.com/300x180?text=Shorts'},
  {id:'leggings',name:'HIT Leggings',price:20.00,sizes:['XS','S','M','L','XL'],img:'https://via.placeholder.com/300x180?text=Leggings'},
  {id:'socks',name:'HIT Socks',price:6.00,img:'https://via.placeholder.com/300x180?text=Socks'},
  {id:'towel',name:'HIT Gym Towel',price:9.00,img:'https://via.placeholder.com/300x180?text=Towel'},
  {id:'beaker',name:'HIT Beaker',price:7.00,img:'https://via.placeholder.com/300x180?text=Beaker'}
];
const currency=v=>'¬£'+(Math.round(v*100)/100).toFixed(2);
const grid=document.getElementById('productsGrid');
let cart=JSON.parse(localStorage.getItem('hh_cart')||'[]');

function saveCart(){localStorage.setItem('hh_cart',JSON.stringify(cart));updateFab();}
function addToCart(line){
  const key=line.id+'|'+(line.size||'');
  const existing=cart.find(l=>(l.id+'|'+(l.size||''))===key);
  if(existing){existing.qty+=line.qty;}else cart.push(line);
  saveCart();renderCart();openDrawer();
}
function removeFromCart(key){cart=cart.filter(l=>(l.id+'|'+(l.size||''))!==key);saveCart();renderCart();}
function computeTotals(){
  const subtotal=cart.reduce((s,l)=>s+l.price*l.qty,0);
  const shipping=subtotal===0?0:(subtotal>=FREE_SHIPPING_OVER?0:SHIPPING_FLAT);
  return{subtotal,shipping,grand:subtotal+shipping};
}
function updateFab(){
  const{subtotal}=computeTotals();
  document.getElementById('basketCount').textContent=cart.reduce((n,l)=>n+l.qty,0);
  document.getElementById('basketTotal').textContent=currency(subtotal);
}
function renderProducts(){
  grid.innerHTML='';
  PRODUCTS.forEach(p=>{
    const card=document.createElement('article');
    card.className='card';
    card.innerHTML=`
      <div class="media"><img src="${p.img}" alt="${p.name}"></div>
      <div class="body">
        <div>
          <h3 class="title">${p.name}</h3>
          <div class="muted">${p.sizes?'Clothing':'Accessory'}</div>
          <div class="row"><span class="price">${currency(p.price)}</span></div>
          <div class="row">
            ${p.sizes?`<select class="size"><option value="">Size</option>${p.sizes.map(s=>`<option>${s}</option>`).join('')}</select>`:`<input type="hidden" class="size">`}
            <input type="number" class="qty" min="1" value="1">
          </div>
        </div>
        <div class="row"><button class="btn btn-accent btn-block add">Add to Basket</button></div>
      </div>`;
    card.querySelector('.add').onclick=()=>{
      const sizeEl=card.querySelector('.size'),size=p.sizes?(sizeEl.value||''):'';
      if(p.sizes&&!size){alert('Please choose a size');return;}
      const qty=parseInt(card.querySelector('.qty').value)||1;
      addToCart({id:p.id,name:p.name,price:p.price,size,qty});
    };
    grid.appendChild(card);
  });
}
function renderCart(){
  const cartItems=document.getElementById('cartItems');
  cartItems.innerHTML=cart.length?'' : '<div class="note">Your basket is empty.</div>';
  cart.forEach(l=>{
    const key=l.id+'|'+(l.size||'');
    const row=document.createElement('div');
    row.className='cart-line';
    row.innerHTML=`<div><strong>${l.name}${l.size?` - ${l.size}`:''}</strong>
    <div class="meta">${currency(l.price)} √ó <input type="number" min="1" value="${l.qty}" style="width:60px"></div>
    </div><div><strong>${currency(l.price*l.qty)}</strong>
    <button class="btn btn-bad small">‚úï</button></div>`;
    row.querySelector('input').oninput=e=>{l.qty=parseInt(e.target.value)||1;saveCart();renderCart();};
    row.querySelector('.btn-bad').onclick=()=>removeFromCart(key);
    cartItems.appendChild(row);
  });
  const{subtotal,shipping,grand}=computeTotals();
  document.getElementById('subtotal').textContent=currency(subtotal);
  document.getElementById('shipping').textContent=currency(shipping);
  document.getElementById('grand').textContent=currency(grand);
  updateFab();
}
function openDrawer(){document.getElementById('drawer').classList.add('open');}
function closeDrawer(){document.getElementById('drawer').classList.remove('open');}
document.getElementById('basketFab').onclick=openDrawer;
document.getElementById('closeDrawer').onclick=closeDrawer;
document.getElementById('drawerBackdrop').onclick=closeDrawer;

document.getElementById('emailOrderBtn').onclick=()=>{
  if(!cart.length)return alert('Cart is empty');
  const{subtotal,shipping,grand}=computeTotals();
  const lines=cart.map(l=>`${l.name}${l.size?` (${l.size})`:''} x ${l.qty} ‚Äî ${currency(l.price*l.qty)}`).join('\n');
  const text=`${lines}\n\nSubtotal: ${currency(subtotal)}\nShipping: ${currency(shipping)}\nTotal: ${currency(grand)}`;
  window.location.href=`mailto:healthandhit@gmail.com?subject=Order&body=${encodeURIComponent(text)}`;
};

paypal.Buttons({
  createOrder: function(data, actions) {
    const{grand}=computeTotals();
    return actions.order.create({
      purchase_units: [{ amount: { value: grand.toFixed(2) } }]
    });
  },
  onApprove: function(data, actions) {
    return actions.order.capture().then(function(details) {
      alert('Payment completed by ' + details.payer.name.given_name);
      cart=[]; saveCart(); renderCart();
    });
  }
}).render('#paypal-button-container');

renderProducts(); renderCart(); updateFab();
</script>
</body>
</html>
