<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>HealthAndHIT Gear</title>
  <style>
    html, body {
      margin: 0; padding: 0;
      background: #2b2b2b;
      color: #fff;
      font-family: 'Poppins', Arial, sans-serif;
      box-sizing: border-box;
    }
    h1 {
      text-align: center;
      color: #ff3939;
      margin: 28px 0 16px;
      font-size: 2em;
      font-weight: 700;
    }
    .category {
      margin: 0 auto 24px auto;
      max-width: 1200px;
      padding: 18px 8px;
    }
    .products {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
      gap: 28px;
      justify-items: center;
      width: 100%;
    }
    .product, .coming-soon {
      background: #23232b;
      border-radius: 14px;
      box-shadow: 0 2px 16px #0005;
      border: 1.5px solid #353545;
      width: 100%;
      max-width: 330px;
      min-width: 0;
      min-height: 430px;
      height: 430px;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
      position: relative;
      box-sizing: border-box;
      overflow: hidden;
      padding: 18px 14px 16px 14px;
      transition: box-shadow .14s, transform .12s;
    }
    .product:hover { box-shadow: 0 5px 32px #0008; transform: translateY(-2px) scale(1.04);}
    .product img, .coming-soon img {
      width: 90%;
      max-width: 185px;
      min-height: 110px;
      max-height: 130px;
      object-fit: contain;
      border-radius: 10px;
      background: #19191f;
      margin-bottom: 12px;
      margin-top: 6px;
      flex-shrink: 0;
      pointer-events: none;
    }
    .product p, .coming-soon p {
      font-size: 1.10em;
      margin: 2px 0 0 0;
      text-align: center;
      word-break: break-word;
      font-weight: 500;
      flex-shrink: 0;
    }
    .product .options, .coming-soon .options {
      width: 100%;
      display: flex;
      flex-direction: column;
      gap: 7px;
      margin-top: 10px;
      margin-bottom: 0;
      flex-shrink: 0;
    }
    .options select, .options input, .options button {
      width: 100%;
      font-size: 16px;
      padding: 10px;
      border-radius: 6px;
      margin-bottom: 2px;
      border: 1px solid #23232b;
    }
    button {
      background: linear-gradient(90deg, #ff2727 60%, #d00000 100%);
      color: #fff;
      font-weight: 600;
      border: none;
      border-radius: 8px;
      padding: 10px 0;
      margin-top: 4px;
      box-shadow: 0 2px 8px #d0000030;
      cursor: pointer;
    }
    button:active { background: #a00000; }
    .remove-btn {
      background: #1c1c1c !important;
      color: #ffbaba;
      font-size: 1.1em;
      padding: 7px 0 !important;
      border-radius: 10px !important;
      width: 34px !important;
      margin-left: 10px;
      border: none !important;
      cursor: pointer;
    }
    .remove-btn:hover { background: #ff4444 !important; color: #fff;}
    .product .coming-label, .coming-soon .coming-label {
      background: #444;
      color: #ffbebe;
      padding: 6px 13px;
      border-radius: 8px;
      font-size: 1.1em;
      letter-spacing: 1px;
      font-weight: 600;
      margin-top: 15px;
      margin-bottom: 0;
      flex-shrink: 0;
    }
    .coming-soon {
      opacity: 0.6;
      background: #222228;
      border: 1.5px dashed #707087;
      pointer-events: none;
    }
    .coming-soon img { filter: grayscale(100%) brightness(1.15); }
    @media (max-width: 1200px) {
      .category { max-width: 98vw; }
    }
    @media (max-width: 950px) {
      .products { grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); }
      .product, .coming-soon { min-width: 0; }
    }
    @media (max-width: 700px) {
      .products { grid-template-columns: 1fr; }
      .product, .coming-soon { max-width: 98vw; }
    }

    #order-confirm-bg {
      display: none;
      position: fixed;
      z-index: 9999;
      left: 0; top: 0; right: 0; bottom: 0;
      background: rgba(24,24,24,0.85);
      justify-content: center;
      align-items: center;
      transition: background 0.2s;
    }
    #order-confirm {
      background: #181824;
      color: #fff;
      border-radius: 18px;
      border: 2px solid #ff3939;
      box-shadow: 0 0 42px #000b;
      width: 94vw;
      max-width: 420px;
      max-height: 92vh;
      padding: 28px 18px 20px 18px;
      overflow-y: auto;
      text-align: center;
      position: relative;
      animation: popin .18s cubic-bezier(.77,0,.18,1.09);
    }
    @keyframes popin {
      0% { transform: scale(0.94) translateY(30px); opacity: 0; }
      100% { transform: scale(1) translateY(0); opacity: 1;}
    }
    #order-confirm h3 { margin-top: 0; color: #1fff99; }
    #order-summary {
      background: #19191f;
      color: #fff;
      padding: 13px 11px;
      border-radius: 8px;
      font-size: 1em;
      max-height: 200px;
      overflow: auto;
      text-align: left;
      margin-bottom: 10px;
      border: 1px solid #232340;
    }
    #order-note-box {
      margin-bottom: 13px;
      width: 100%;
    }
    #order-note {
      width: 100%;
      min-height: 48px;
      background: #23232b;
      color: #fff;
      border-radius: 8px;
      border: 1.5px solid #353545;
      font-size: 1em;
      padding: 8px 11px;
      box-sizing: border-box;
      resize: vertical;
    }
    #order-confirm .payment-section {
      margin: 12px 0 12px 0;
      background: #242444;
      border-radius: 8px;
      padding: 12px 8px;
      font-size: 1.1em;
      line-height: 1.5;
    }
    #order-confirm .payment-section a {
      color: #1fffd7;
      font-weight: bold;
      text-decoration: underline;
      word-break: break-all;
    }
    #order-confirm .payment-section .gpay {
      color: #00ffae;
      font-weight: bold;
    }
    #order-confirm .modal-buttons {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 13px;
      margin-top: 18px;
    }
    #order-confirm .modal-buttons button {
      font-size: 1em;
      font-weight: 600;
      border-radius: 8px;
      border: none;
      padding: 12px 20px;
      background: linear-gradient(90deg,#ff3939,#d00000 75%);
      color: #fff;
      cursor: pointer;
      transition: background 0.14s;
    }
    #order-confirm .modal-buttons button:active { background: #b30000; }
    #order-confirm .close-x {
      position: absolute;
      right: 15px; top: 8px;
      font-size: 1.6em;
      color: #ff4545;
      cursor: pointer;
      font-weight: bold;
      opacity: 0.75;
    }
    #order-confirm .close-x:hover { opacity: 1; color: #fff;}
    .email-help {
      margin-top: 12px;
      color: #ffcfcf;
      font-size: 0.93em;
      text-align: center;
    }
    .email-help b { color: #1fffd7; }
    @media (max-width: 480px) {
      #order-confirm { max-width: 99vw; padding: 10px 3vw; }
      #order-summary { font-size: .98em;}
      #order-confirm .modal-buttons button { padding: 11px 5vw;}
    }
    /*--- Basket/Checkout Styles (keep same as before or style to fit your layout) ---*/
    #basket {
      background: #23232b;
      border-radius: 14px;
      border: 1.5px solid #353545;
      max-width: 440px;
      margin: 32px auto 18px auto;
      box-shadow: 0 2px 16px #0005;
      padding: 18px 18px 18px 18px;
    }
    #basket h3 { margin-top: 0; color: #ffb923; }
    #basket-list { list-style: none; padding-left: 0;}
    #basket-list li { margin-bottom: 8px;}
    .total { font-weight: 500; margin: 4px 0;}
    .checkout {
      background: #23232b;
      border-radius: 14px;
      border: 1.5px solid #353545;
      max-width: 440px;
      margin: 0 auto 32px auto;
      box-shadow: 0 2px 16px #0005;
      padding: 22px 18px 24px 18px;
    }
    .checkout h2 { color: #1fff99; margin-top: 0;}
    .checkout-form input, .checkout-form select {
      width: 100%; padding: 11px; border-radius: 8px;
      border: 1.2px solid #292930; background: #1c1c20;
      color: #fff; margin-bottom: 10px; font-size: 1em;
    }
    .checkout-form button { margin-top: 10px;}
    .profile-controls { margin-bottom: 8px;}
    .profile-controls label { font-size: 0.99em;}
    .clear-profile { background: #111; color: #ffbaba; margin-top: 0;}
    .clear-profile:hover { background: #d00000; color: #fff;}
  </style>
</head>
<body>
<h1>HealthAndHIT Gear</h1>
<div class="category">
  <div class="products">
    <div class="product">
      <img alt="Towel" src="towel.jpg"/>
      <p>Quick Dry Towel – £10</p>
      <div class="options">
        <input class="qty" id="qty-towel" min="1" placeholder="Qty" type="number" value="1"/>
        <button onclick="addToBasket('Towel', 10,  null, 'qty-towel')">Add to Basket</button>
      </div>
    </div>
    <div class="product">
      <img alt="Vest" src="vest.png"/>
      <p>Vest – £18</p>
      <div class="options">
        <select id="size-vest"><option>Size</option><option>S</option><option>M</option><option>L</option><option>XL</option></select>
        <input id="qty-vest" min="1" type="number" value="1"/>
        <button onclick="addToBasket('Vest', 18, 'size-vest', 'qty-vest')">Add</button>
      </div>
    </div>
    <div class="product">
      <img alt="Cap" src="cap.png"/>
      <p>Cap – £15</p>
      <div class="options">
        <input id="qty-cap" min="1" type="number" value="1"/>
        <button onclick="addToBasket('Cap', 15, null, 'qty-cap')">Add</button>
      </div>
    </div>
    <div class="product">
      <img alt="Jumper" src="jumper.png"/>
      <p>Jumper – £35</p>
      <div class="options">
        <select id="size-jumper"><option>Size</option><option>S</option><option>M</option><option>L</option><option>XL</option></select>
        <input id="qty-jumper" min="1" type="number" value="1"/>
        <button onclick="addToBasket('Jumper', 35, 'size-jumper', 'qty-jumper')">Add</button>
      </div>
    </div>
    <div class="product">
      <img alt="Hoodie" src="hoodie.png"/>
      <p>Hoodie – £38</p>
      <div class="options">
        <select id="size-hoodie"><option>Size</option><option>S</option><option>M</option><option>L</option><option>XL</option></select>
        <input id="qty-hoodie" min="1" type="number" value="1"/>
        <button onclick="addToBasket('Hoodie', 38, 'size-hoodie', 'qty-hoodie')">Add</button>
      </div>
    </div>
    <div class="product">
      <img alt="Sublimated Cap" src="subcap.png"/>
      <p>Sublimated Cap – £12</p>
      <div class="options">
       
        <input id="qty-subcap" min="1" type="number" value="1"/>
        <button onclick="addToBasket('Sublimated Cap', 12, 'qty-subcap')">Add</button>
      </div>
    </div>
    <div class="product">
      <img alt="Mug" src="mug.png"/>
      <p>Mug – £12</p>
      <div class="options">
        <input id="qty-mug" min="1" type="number" value="1"/>
        <button onclick="addToBasket('Mug', 12, null, 'qty-mug')">Add</button>
      </div>
    </div>
    <div class="product">
      <img alt="Bottle" src="bottle.png"/>
      <p>Bottle – £15</p>
      <div class="options">
        <input id="qty-bottle" min="1" type="number" value="1"/>
        <button onclick="addToBasket('Bottle', 15, null, 'qty-bottle')">Add</button>
      </div>
    </div>
    <div class="product">
      <img alt="Keyring" src="keyring.png"/>
      <p>Keyring – £5</p>
      <div class="options">
        <input id="qty-keyring" min="1" type="number" value="1"/>
        <button onclick="addToBasket('Keyring', 5, null, 'qty-keyring')">Add</button>
      </div>
    </div>
    <div class="product">
      <img alt="Gym Bag" src="gymbag.png"/>
      <p>Gym Bag – £12</p>
      <div class="options">
        <input id="qty-gymbag" min="1" type="number" value="1"/>
        <button onclick="addToBasket('Gym Bag', 12, null, 'qty-gymbag')">Add</button>
      </div>
    </div>
    <div class="product">
      <img alt="T-shirt" src="tshirt.jpg"/>
      <p>T-shirt – £12</p>
      <div class="options">
        <select id="size-tshirt"><option>Size</option><option>Medium</option><option>Large</option><option>XL</option></select>
        <input id="qty-tshirt" min="1" type="number" value="1"/>
        <button onclick="addToBasket('T-shirt', 12, 'size-tshirt', 'qty-tshirt')">Add</button>
      </div>
    </div>
    <!-- 4 "Coming Soon" boxes (all identical) -->
    <div class="coming-soon">
      <img src="comingsoon.png" alt="Coming Soon"/>
      <p>Coming Soon</p>
      <div class="options"></div>
      <span class="coming-label">Coming Soon</span>
    </div>
    <div class="coming-soon">
      <img src="comingsoon.png" alt="Coming Soon"/>
      <p>Coming Soon</p>
      <div class="options"></div>
      <span class="coming-label">Coming Soon</span>
    </div>
    <div class="coming-soon">
      <img src="comingsoon.png" alt="Coming Soon"/>
      <p>Coming Soon</p>
      <div class="options"></div>
      <span class="coming-label">Coming Soon</span>
    </div>
    <div class="coming-soon">
      <img src="comingsoon.png" alt="Coming Soon"/>
      <p>Coming Soon</p>
      <div class="options"></div>
      <span class="coming-label">Coming Soon</span>
    </div>
  </div>
</div>

<div id="basket">
  <h3>Your Basket</h3>
  <ul id="basket-list"></ul>
  <button onclick="emptyBasket()">🗑️ Empty Basket</button>
  <p class="total">Shipping: £<span id="shipping-cost">0.00</span></p>
  <p class="total" id="basket-total">Total: £0</p>
  <label for="shipping">🚐 Shipping Method:</label>
  <select id="shipping" onchange="updateBasketDisplay()">
    <option value="0">Local Pickup – £0 (ASAP)</option>
    <option value="3.99">UK Standard – £3.99 (2–4 days)</option>
    <option value="6.99">Express – £6.99 (Next Day)</option>
  </select>
  <div style="background:#1f1f1f;color:#ffcc00;padding:10px;margin-top:15px;border-radius:8px;">
    ⚠️ <strong>Please Note:</strong><br/>All items are handmade or customised to order.<br/>🕒 <strong>Please allow time for your item to be built and dispatched.</strong>
    <br/><label style="display:flex;align-items:center;gap:8px;margin-top:10px;font-weight:bold;">
      <input id="stockAgree" required type="checkbox"/> I understand items are made to order and may vary or require extra build time.
    </label>
  </div>
</div>

<div class="checkout">
  <h2>Checkout</h2>
  <div class="checkout-form">
    <input id="name" placeholder="Full Name" required type="text">
    <input id="email" placeholder="Email" required type="email"/>
    <input id="phone" placeholder="Phone Number" required type="text"/>
    <input id="address1" placeholder="Street Address" required type="text"/>
    <input id="address2" placeholder="Town/City" required type="text"/>
    <input id="postcode" placeholder="Postcode" required type="text"/>
    <div class="profile-controls">
    
    </div>
    <br>
    <button type="button" onclick="handleCheckout()">Place Order</button>
  </div>
</div>

<!-- Popup Modal for Order Summary & Payment -->
<div id="order-confirm-bg">
  <div id="order-confirm">
    <span class="close-x" onclick="closeOrderModal()">&times;</span>
    <h3>Order Summary</h3>
    <div id="order-note-box">
      <textarea id="order-note" placeholder="Add a note or request (optional)"></textarea>
    </div>
    <pre id="order-summary"></pre>
    <div class="payment-section">
      <strong>Payment Options:</strong><br>
      PayPal: <a href="https://paypal.me/healthandhit" target="_blank">paypal.me/healthandhit</a><br>
      Google Pay: <span class="gpay">healthandhit@gmail.com</span>
    </div>
    <div class="modal-buttons">
      <button id="copyAndEmailBtn" onclick="copyOrderAndEmail()">Copy &amp; Email Order</button>
      <button id="copyOnlyBtn" onclick="copyOrderOnly()">Copy Order Only</button>
      <button id="payNowBtn" style="display:none;" onclick="window.open('https://paypal.me/healthandhit','_blank');">Pay Now (PayPal)</button>
      <button onclick="closeOrderModal()">Close</button>
    </div>
    <div class="email-help">
      <b>Having trouble?</b> If your email doesn't open, just paste the order into an email to <b>healthandhit@gmail.com</b>.
    </div>
  </div>
</div>

<script>
  let basket = JSON.parse(localStorage.getItem("basket")) || [];

  function addToBasket(name, price, sizeId, qtyId) {
    const size = sizeId ? document.getElementById(sizeId).value : null;
    const qty = qtyId ? parseInt(document.getElementById(qtyId).value) || 1 : 1;
    if (sizeId && size === 'Size') {
      alert('Please select a size.');
      return;
    }
    basket.push({ name, price, size, qty });
    localStorage.setItem('basket', JSON.stringify(basket));
    updateBasketDisplay();
  }

  function updateBasketDisplay() {
    const list = document.getElementById('basket-list');
    const totalDisplay = document.getElementById('basket-total');
    const shippingDisplay = document.getElementById('shipping-cost');
    if(!list) return;
    list.innerHTML = '';
    let total = 0;
    basket.forEach((item, index) => {
      const itemTotal = item.price * item.qty;
      const li = document.createElement('li');
      li.innerHTML = `${item.qty} x ${item.name}${item.size ? ' (' + item.size + ')' : ''} – £${itemTotal.toFixed(2)} <button class='remove-btn' onclick="removeItem(${index})">❌</button>`;
      list.appendChild(li);
      total += itemTotal;
    });
    const shipping = document.getElementById('shipping') ? parseFloat(document.getElementById('shipping').value) : 0;
    if(shippingDisplay) shippingDisplay.textContent = shipping.toFixed(2);
    if(totalDisplay) totalDisplay.textContent = `Total: £${(total + shipping).toFixed(2)}`;
  }

  function removeItem(index) {
    basket.splice(index, 1);
    localStorage.setItem("basket", JSON.stringify(basket));
    updateBasketDisplay();
  }

  function emptyBasket() {
    if (confirm("Empty your basket?")) {
      basket = [];
      localStorage.removeItem("basket");
      updateBasketDisplay();
    }
  }

  function clearProfile() {
    localStorage.removeItem("clientProfile");
    alert("Saved details removed.");
    document.getElementById("name").value = "";
    document.getElementById("email").value = "";
    document.getElementById("phone").value = "";
    document.getElementById("address1").value = "";
    document.getElementById("address2").value = "";
    document.getElementById("postcode").value = "";
  }

  function handleCheckout() {
    if (!basket.length) {
      alert("Your basket is empty. Please add items before checking out!");
      return;
    }

    const name = document.getElementById('name').value.trim();
    const email = document.getElementById('email').value.trim();
    const phone = document.getElementById('phone').value.trim();
    const address1 = document.getElementById('address1').value.trim();
    const address2 = document.getElementById('address2').value.trim();
    const postcode = document.getElementById('postcode').value.trim();
    const shippingLabel = document.getElementById('shipping').selectedOptions[0].text;
    const shippingPrice = parseFloat(document.getElementById('shipping').value);

    if (!name || !email || !phone || !address1 || !address2 || !postcode || !document.getElementById("stockAgree").checked) {
      alert("Please complete all fields and agree to the build time.");
      return;
    }
    let summary = `--- HealthAndHIT Gear Order ---\n\nName: ${name}\nEmail: ${email}\nPhone: ${phone}\nAddress:\n${address1}\n${address2}\n${postcode}\nShipping Method: ${shippingLabel}\n\nOrdered Items:\n`;
    let total = 0;
    basket.forEach(item => {
      const lineTotal = item.price * item.qty;
      summary += `- ${item.qty} x ${item.name}${item.size ? ' (' + item.size + ')' : ''} – £${lineTotal.toFixed(2)}\n`;
      total += lineTotal;
    });
    summary += `\nShipping: £${shippingPrice.toFixed(2)}\nTotal: £${(total + shippingPrice).toFixed(2)}\n\n⚠️ This is an order confirmation only.\nYour items will be shipped after payment is received.\n\nSent via HealthAndHIT Shop`;

    document.getElementById('order-summary').textContent = summary;
    basket = [];
    localStorage.removeItem("basket");
    updateBasketDisplay();

    // Reset modal state
    document.getElementById('payNowBtn').style.display = 'none';
    document.getElementById('copyAndEmailBtn').disabled = false;
    document.getElementById('copyAndEmailBtn').textContent = "Copy & Email Order";
    document.getElementById('order-confirm-bg').style.display = 'flex';
    document.getElementById('order-note').value = '';
  }

  function closeOrderModal() {
    document.getElementById('order-confirm-bg').style.display = 'none';
  }

  function copyOrderAndEmail() {
    const summary = document.getElementById('order-summary').textContent;
    const note = document.getElementById('order-note').value.trim();
    let emailBody = note ? `NOTE: ${note}\n\n${summary}` : summary;

    // Try to copy
    if (navigator.clipboard) {
      navigator.clipboard.writeText(emailBody);
    } else {
      const temp = document.createElement('textarea');
      temp.value = emailBody;
      document.body.appendChild(temp);
      temp.select();
      document.execCommand('copy');
      document.body.removeChild(temp);
    }
    // Open mailto link (opens default email app if possible)
    window.location.href = 'mailto:healthandhit@gmail.com?subject=New%20Order&body=' + encodeURIComponent(emailBody);

    // Show payment button and feedback
    document.getElementById('payNowBtn').style.display = '';
    document.getElementById('copyAndEmailBtn').disabled = true;
    document.getElementById('copyAndEmailBtn').textContent = "Order Sent!";
  }

  function copyOrderOnly() {
    const summary = document.getElementById('order-summary').textContent;
    const note = document.getElementById('order-note').value.trim();
    let emailBody = note ? `NOTE: ${note}\n\n${summary}` : summary;

    if (navigator.clipboard) {
      navigator.clipboard.writeText(emailBody);
      alert("Order copied! Paste it into your email app.");
    } else {
      const temp = document.createElement('textarea');
      temp.value = emailBody;
      document.body.appendChild(temp);
      temp.select();
      document.execCommand('copy');
      document.body.removeChild(temp);
      alert("Order copied! Paste it into your email app.");
    }
  }

  document.addEventListener('DOMContentLoaded', updateBasketDisplay);
</script>
</body>
</html>
